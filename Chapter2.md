# 第二章:理解go的本质

# 1.go编译器
	go tool compile test.go
	test.go->test.o
	go tool compile -pack test.go
	test.go->test.a

	file test.a
	结果:
	current ar archive

	file test.o
	current ar archive

	archive file 存档文件是包含一个或多个文件的二进制文件，主要是用于将多个文件分组为一个文件。 
	这些格式之一是ar，这是被Go使用。

	ar t test.a
	结果
	__.PKGDEF
	_go_.o

	go tool compile -S test.go更详细的信息

# 2.垃圾回收
	垃圾回收是释放未使用的内存空间的过程。 换句话说，垃圾收集器查看哪些对象不在范围内并且无法再被引用，并释放它们消耗的内存空间。 
	此过程在Go程序运行时（而不是在程序执行之前或之后）以并行方式发生。

	三色算法
	三色标级和清除算法

	三色标记和清除算法背后的主要原理是，它根据堆的颜色将堆的对象划分为三个不同的集合，这些颜色由算法分配。 
	现在是时候讨论每种颜色集的含义了。 保证黑色集合的对象没有指向白色集合的任何对象的指针。
	但是，白色集的对象可以具有指向黑色集的对象的指针，因为这对垃圾收集器的操作没有影响。 
	灰色集合的对象可能具有被指白色集合的某些对象指向的指针。 
	最后，白色集合的对象是垃圾收集的候选对象。

	请注意，没有对象可以直接从黑色集转到白色集，这允许算法进行操作并能够清除白色集上的对象。 
	此外，黑色组的任何对象都不能直接指向白色组的对象。
	因此，当垃圾回收开始时，所有对象都是白色的，垃圾回收器访问所有根对象，并将它们着色为灰色。 
	根是可以由应用程序直接访问的对象，其中包括全局变量和堆栈上的其他内容。 这些对象主要取决于特定程序的Go代码。
	此后，垃圾收集器选择一个灰色对象，使其变为黑色，然后开始查看该对象是否具有指向白色集合中其他对象的指针。 
	这意味着，当扫描灰色对象以寻找指向其他对象的指针时，该对象将变为黑色。 
	如果该扫描发现该特定对象具有一个或多个指向白色对象的指针，则会将该白色对象放入灰色集中。 
	只要灰色集中存在对象，此过程就会持续进行。 
	之后，白色集中的对象将无法访问，并且它们的存储空间可以被重用。 
	因此，在这一点上，白色集合的元素被认为是垃圾收集的。

	请注意，如果在垃圾回收周期的某个时刻灰色集合的某个对象变得不可访问，
	则不会在该垃圾回收周期中将其收集，而是在下一个垃圾回收中将其收集！ 尽管这不是最佳情况，但还不错。
















